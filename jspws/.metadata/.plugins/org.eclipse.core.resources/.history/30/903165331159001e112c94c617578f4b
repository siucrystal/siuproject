<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
 <link rel="stylesheet" type="text/css" href="./css/write.css">
 <script type="text/javascript" src="http://code.jquery.com/jquery-3.5.1.min.js"></script>
 <script>
	function writeAjax() {
		var title = $('#wTitle').val();
		var context = $("#wContext").val();
	    // const params = {id,pw,name,age};
	    const params = {title:title, context:context};
	    // console.log("params : " +params);

	    // 비밀번호와 비밀번호 확인이 일치하는지 확인
	    console.log("title : " + title);
	    console.log("context : " + context);
	    		
		$.ajax({
			type: 'POST',
			url: 'writeProc.jsp',
			dataType: 'text',
			data: params,
			success: function(data) {
				if(data['rs'] === 1) {
					alert('게시글 작성이 완료되었습니다');
					location.href = 'board.jsp';
				} else {
					alert('죄송합니다.. 새로고침 후 다시 작성해주세요');					
				}
				
			},
			error : function(xhr, status, error) {
				console.log(xhr, status, error);
				alert("실패실패 ㅠㅠㅠ");
			}
		});
	};
	$(function(){		        
        $('#writeBtn').on('click', function() {
        	writeAjax()
        });
        
	});
</script>
<title>write</title>

</head>
<%@include file="loginmenu.jsp" %>
<body>
	 <div class="wrap">
        <h1>회원제 게시판 - 글쓰기</h1>
        <form action="view.jsp">
            <div class="main">
                <table border="1">
                    <tbody>
                        <tr>
                            <td class="w_name">제목</td>
                            <td><input type="text" name="wTitle" id="wTitle"></td>
                        </tr>
                        <tr>
                            <td class="w_name">내용</td>
                            <td><input type="text" name="wContext" id="wContext"></td>
                        </tr>
                        <tr>
                            <td colspan="2" class="w_btn">
                                <input type="hidden" name="category" value="일반">
                                <input type="submit" value="작성 완료" id="writeBtn">
                                <input type="button" value="다시 입력" id="resetBtn">
                                <input type="button" value="목록 보기" id="listBtn">
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </form>
    </div>
</body>
</html>