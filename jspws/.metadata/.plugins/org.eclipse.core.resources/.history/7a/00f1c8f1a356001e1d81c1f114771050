<%@page import="com.google.gson.JsonObject"%>
<%@page import="member.MemberDAO"%>
<%@page import="java.util.ArrayList"%>
<%@page import="java.util.List"%>
<%@page import="member.MemberDTO"%>
<%@page import="java.sql.ResultSet"%>
<%@page import="java.sql.PreparedStatement"%>
<%@page import="java.sql.DriverManager"%>
<%@page import="java.sql.Connection"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>

<%
//이건 한글로 변형 시켜주는 거(이거 없으면 한글 깨짐)	
	request.setCharacterEncoding("utf-8");  
	String id = request.getParameter("id");
	String pw = request.getParameter("pw");
	String name = request.getParameter("name");
	int age = Integer.parseInt(request.getParameter("age"));
	MemberDTO dto = new MemberDTO(id,pw,name,age);
	
%>
<script>
	console.log("id : " + id);
	console.log("pw : " + pw);
	console.log("name : " + name);
	console.log("age : " + age);
</script>

<%
	MemberDAO dao = new MemberDAO();
	int rs = dao.insert(dto);
	// int rs = 0;
%>
<script>
	console.log("여기 들렸다 감!!!!22334");
	<%if(rs == 1){%>
		console.log("여기 들렸다 감!");
		alert('회원가입을 축하드립니다~');
		location.href = "login.jsp";
	<%}else {%>
		alert('죄송합니다.. 잠시후에 다시 입력 바랍니다.');
		history.back();
	<%}%>
	
<%
JsonObject jsonObject = new JsonObject();
jsonObject.addProperty("rs", rs);
%>
<%=jsonObject%>
</script>



