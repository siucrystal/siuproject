<%@page import="member.MemberDAO"%>
<%@page import="java.util.ArrayList"%>
<%@page import="java.util.List"%>
<%@page import="member.MemberDTO"%>
<%@page import="java.sql.ResultSet"%>
<%@page import="java.sql.PreparedStatement"%>
<%@page import="java.sql.DriverManager"%>
<%@page import="java.sql.Connection"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>

<%
	request.setCharacterEncoding("utf-8");  // 이건 한글로 변형 시켜주는 거(이거 없으면 한글 깨짐)
	String id = request.getParameter("id");
	String pw = request.getParameter("pw");
%>

<%
		
		boolean isId = false;
		boolean isPw = false;
		String name = "";
		
		MemberDTO dto = new MemberDTO();
		dto.setId(id);
		MemberDAO dao = new MemberDAO();
		dto = dao.getMember(id);
		if(dto != null) {
			isId = true;
			if(dto.getPw().equals(pw)) {
				isPw = true;
			}
		}	
%>
<%
	if(isId && isPw) {
		session.setAttribute("id", id);
		session.setAttribute("name", name);
		response.sendRedirect("index.jsp");
	} else {
		%>
		<script>
			alert("ID나 PW를 다시 확인해주세요!!");
			history.back();
		</script>
		
		<%
	}
%>



